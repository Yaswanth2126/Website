<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Basic Web App — Beginner HTML (Fixed Buttons)</title>
  <style>
    :root{--accent:#3478f6;--muted:#666;--card:#fff;--bg:#f4f7fb;font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial}
    html,body{height:100%;margin:0;background:var(--bg)}
    .container{max-width:920px;margin:28px auto;padding:18px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    h1{font-size:1.4rem;margin:0;color:#111}
    nav a{margin-left:10px;color:var(--accent);text-decoration:none}
    .card{background:var(--card);border-radius:10px;padding:16px;box-shadow:0 6px 18px rgba(20,30,40,0.06)}
    .grid{display:grid;grid-template-columns:1fr 340px;gap:16px}
    @media (max-width:820px){.grid{grid-template-columns:1fr}}
    .todo-input{display:flex;gap:8px;margin-bottom:12px}
    input[type=text], input[type=email], textarea{flex:1;padding:10px;border-radius:8px;border:1px solid #e0e6ee}
    button{padding:10px 12px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer}
    ul.todo-list{list-style:none;padding:0;margin:0}
    ul.todo-list li{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:8px;border:1px solid #f0f3f8;margin-bottom:8px}
    .todo-left{display:flex;align-items:center;gap:10px}
    .todo-left input[type=checkbox]{width:18px;height:18px}
    .todo-text.done{text-decoration:line-through;color:var(--muted)}
    .small{font-size:0.9rem;color:var(--muted)}
    form.contact-form{display:flex;flex-direction:column;gap:8px}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:0.9rem}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Basic Web App <span class="small">(Beginner HTML + JS)</span></h1>
      <nav>
        <a href="#todo">To‑Do</a>
        <a href="#contact">Contact</a>
      </nav>
    </header>

    <main class="grid">
      <!-- LEFT: To-Do -->
      <section class="card" id="todo">
        <h2>To‑Do List</h2>
        <p class="small">Add tasks, mark done, and they are saved in your browser (localStorage).</p>

        <div class="todo-input" aria-label="add-todo">
          <input id="taskInput" type="text" placeholder="Add a new task (e.g. Buy groceries)" />
          <!-- IMPORTANT: button type=button prevents accidental form submit -->
          <button id="addBtn" type="button">Add</button>
        </div>

        <ul id="tasks" class="todo-list" aria-live="polite"></ul>

        <div style="display:flex;gap:8px;margin-top:10px;">
          <button id="clearCompleted" type="button">Clear completed</button>
          <button id="clearAll" type="button" style="background:#e74c3c">Clear all</button>
        </div>
      </section>

      <!-- RIGHT: About + Contact -->
      <aside class="card">
        <h3>About this app</h3>
        <p class="small">This single-file example uses only HTML, CSS and JavaScript. Edit it to learn.</p>

        <h4 id="contact">Contact (client-side only)</h4>
        <form id="contactForm" class="contact-form">
          <input id="name" type="text" placeholder="Your name" required />
          <input id="email" type="email" placeholder="you@example.com" required />
          <textarea id="message" rows="4" placeholder="Message" required></textarea>
          <!-- send button is type=submit because we handle submit event explicitly -->
          <button id="sendContact" type="submit">Send</button>
        </form>
        <p id="contactResp" class="small" aria-live="polite"></p>
      </aside>
    </main>

    <footer class="card">
      <p class="small">Tip: open browser console (F12) to see logs. If a button still doesn't work, check the console for errors and copy them here.</p>
    </footer>
  </div>

  <script>
    // Wrap all JS inside DOMContentLoaded to ensure elements exist
    document.addEventListener('DOMContentLoaded', () => {
      // Element refs
      const taskInput = document.getElementById('taskInput');
      const addBtn = document.getElementById('addBtn');
      const tasksUl = document.getElementById('tasks');
      const clearCompletedBtn = document.getElementById('clearCompleted');
      const clearAllBtn = document.getElementById('clearAll');
      const contactForm = document.getElementById('contactForm');
      const contactResp = document.getElementById('contactResp');

      // localStorage helpers
      const STORAGE_KEY = 'basic_todo_tasks_v2';
      function loadTasks(){
        try{
          const raw = localStorage.getItem(STORAGE_KEY);
          return raw ? JSON.parse(raw) : [];
        }catch(err){
          console.error('Failed to parse tasks from localStorage', err);
          return [];
        }
      }
      function saveTasks(tasks){
        try{
          localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks));
        }catch(err){
          console.error('Failed to save tasks to localStorage', err);
        }
      }

      // Render the list
      function render(){
        const tasks = loadTasks();
        tasksUl.innerHTML = '';
        if(tasks.length === 0){
          const li = document.createElement('li');
          li.className = 'small';
          li.textContent = 'No tasks yet — add one above!';
          tasksUl.appendChild(li);
          return;
        }

        tasks.forEach((t, i) => {
          const li = document.createElement('li');

          // Left side: checkbox + text
          const left = document.createElement('div');
          left.className = 'todo-left';

          const cb = document.createElement('input');
          cb.type = 'checkbox';
          cb.checked = !!t.done;
          cb.addEventListener('change', () => {
            const all = loadTasks();
            if(!all[i]) return; // safety
            all[i].done = cb.checked;
            saveTasks(all);
            render();
          });

          const text = document.createElement('span');
          text.textContent = t.text;
          text.className = t.done ? 'todo-text done' : 'todo-text';

          left.appendChild(cb);
          left.appendChild(text);

          // Right side: delete button
          const del = document.createElement('button');
          del.type = 'button';
          del.textContent = 'Delete';
          del.style.background = '#f6f7fb';
          del.style.color = '#111';
          del.addEventListener('click', () => {
            const all = loadTasks();
            all.splice(i, 1);
            saveTasks(all);
            render();
          });

          li.appendChild(left);
          li.appendChild(del);
          tasksUl.appendChild(li);
        });
      }

      // Add task handler
      function addTaskFromInput(){
        const text = taskInput.value.trim();
        if(!text){
          alert('Please type a task');
          taskInput.focus();
          return;
        }
        const all = loadTasks();
        all.push({text, done:false, created: Date.now()});
        saveTasks(all);
        taskInput.value = '';
        render();
      }

      // Event listeners for buttons
      addBtn.addEventListener('click', addTaskFromInput);

      // Also allow Enter key inside input to add (improves UX)
      taskInput.addEventListener('keydown', (e) => {
        if(e.key === 'Enter'){
          e.preventDefault();
          addTaskFromInput();
        }
      });

      clearCompletedBtn.addEventListener('click', () => {
        const filtered = loadTasks().filter(t => !t.done);
        saveTasks(filtered);
        render();
      });

      clearAllBtn.addEventListener('click', () => {
        if(confirm('Clear all tasks?')){
          saveTasks([]);
          render();
        }
      });

      // Contact form submit (client-side only demo)
      contactForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const message = document.getElementById('message').value.trim();
        if(!name || !email || !message){
          contactResp.textContent = 'Please fill in all fields.';
          return;
        }
        // Show a friendly message — a real app would send this to a server
        contactResp.textContent = `Thanks ${name}! (Demo only — no email sent)`;
        console.log('Contact submitted (demo):', {name, email, message});
        contactForm.reset();
      });

      // Initial render
      render();

      // Helpful console message for beginners
      console.log('Basic Web App loaded. Buttons are wired up and ready.');
    });
  </script>
</body>
</html>
